<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Карта России — города и погода</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- Ссылка на бота в Telegram (можно заменить на своего бота) -->
  <script>window.TELEGRAM_BOT_URL = "https://t.me/Russianweather1_bot";</script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    body {
      background: #ffffff;
      color: #111;
      display: flex;
      flex-direction: column;
    }
    header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      font-size: 0.95rem;
      font-weight: 600;
      border-bottom: 1px solid #e0e0e0;
      background: #fff;
      flex-shrink: 0;
    }
    header .logo-link {
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: #0ea5e9;
      transition: opacity 0.2s;
    }
    header .logo-link:hover { opacity: 0.85; }
    header .logo-icon {
      width: 36px;
      height: 36px;
      flex-shrink: 0;
    }
    header .logo-text { font-weight: 700; }
    header span {
      color: #666;
      font-weight: 400;
      font-size: 0.85rem;
      margin-left: auto;
    }
    #map {
      flex: 1;
      width: 100%;
    }
    .leaflet-popup-content-wrapper {
      border-radius: 10px;
    }
    .leaflet-popup-content {
      margin: 6px 10px;
      font-size: 0.9rem;
    }
    .popup-title {
      font-weight: 600;
      margin-bottom: 4px;
    }
    .popup-temp { color: #0ea5e9; font-weight: 500; margin-bottom: 6px; }
    .popup-actions a {
      display: inline-block;
      margin-top: 4px;
      padding: 4px 8px;
      background: #2f83ff;
      color: #fff;
      border-radius: 8px;
      text-decoration: none;
      font-size: 0.8rem;
    }
    /* Маркеры с погодой на карте */
    .city-marker-wrap {
      text-align: center;
      cursor: pointer;
      white-space: nowrap;
      font-size: 0;
      line-height: 0;
    }
    .city-marker-wrap .city-marker-temp {
      display: inline-block;
      font-size: 11px;
      font-weight: 700;
      color: #fff;
      background: #0ea5e9;
      padding: 2px 5px;
      border-radius: 6px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.2);
      margin-bottom: 2px;
    }
    .city-marker-wrap .city-marker-name {
      display: inline-block;
      font-size: 10px;
      color: #333;
      background: rgba(255,255,255,0.95);
      padding: 1px 4px;
      border-radius: 4px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.15);
      max-width: 90px;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .city-marker-wrap .city-marker-dot {
      width: 8px;
      height: 8px;
      background: #e74c3c;
      border: 2px solid #fff;
      border-radius: 50%;
      margin: 2px auto 0;
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }
    /* Атрибуция с флагом РФ */
    .leaflet-control-attribution.leaflet-control a {
      font-size: 10px;
    }
    .city-marker-div {
      background: none !important;
      border: none !important;
    }
  </style>
</head>
<body>
  <header>
    <a href="#" id="logoLink" class="logo-link" target="_blank" rel="noopener">
      <svg class="logo-icon" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M20 4C11.16 4 4 11.16 4 20s7.16 16 16 16 16-7.16 16-16S28.84 4 20 4z" fill="#0ea5e9" opacity="0.2"/>
        <path d="M20 8c-6.63 0-12 5.37-12 12s5.37 12 12 12 12-5.37 12-12S26.63 8 20 8z" fill="#0ea5e9"/>
        <circle cx="20" cy="16" r="4" fill="#fbbf24"/>
        <path d="M14 24c0-3.31 2.69-6 6-6s6 2.69 6 6" stroke="#94a3b8" stroke-width="1.5" fill="none"/>
        <ellipse cx="20" cy="28" rx="6" ry="2" fill="#94a3b8" opacity="0.6"/>
      </svg>
      <span class="logo-text">Погода России</span>
    </a>
    <span>нажмите по городу — откроется погода</span>
  </header>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="app.js"></script>
</body>
</html>

